<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>๐งณ ุฏุณุชุงุฑ ูุงู ุณูุฑ</title>
    
    <!-- ุขฺฉู ุจุฑูุงูู -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 32 32%22><text y=%2222%22 font-size=%2232%22>๐งณ</text></svg>">
    
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
</head>
<body class="bg-gray-100 dark:bg-gray-900">
<div id="root"></div>

<script type="text/babel">

// ๐จ ุฑูฺฏโูุง
const COLORS = {
    primary: "bg-ios-blue",
    secondaryBg: "bg-white dark:bg-gray-800",
    tertiaryBg: "bg-gray-50 dark:bg-gray-900",
    lightText: "text-gray-800 dark:text-gray-100",
    mutedText: "text-gray-500 dark:text-gray-400",
    separator: "border-gray-200 dark:border-gray-700"
};

// ๐ ุงุจุฒุงุฑ ุฐุฎุฑูโุณุงุฒ
const saveToLocalStorage = (key, value) => localStorage.setItem(key, JSON.stringify(value));
const loadFromLocalStorage = (key, defaultValue) => {
    const data = localStorage.getItem(key);
    return data ? JSON.parse(data) : defaultValue;
};

// ๐ Splash Screen
const SplashScreen = ({ isVisible }) => {
    if (!isVisible) return null;
    return (
        <div className="fixed inset-0 flex flex-col items-center justify-center bg-ios-blue text-white z-50">
            <h1 className="text-4xl font-extrabold mb-4">๐งณ ุฏุณุชุงุฑ ูุงู ุณูุฑ</h1>
            <p className="text-sm">ููุดุชู ุดุฏู ุจุง โค๏ธ ุชูุณุท ูุญูุฏ ุตุงุฏู ฺฉุงุฌ</p>
        </div>
    );
};

// โณ ููุฏูฺฏ
const LoadingIndicator = ({ message = "ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ..." }) => (
    <div className="flex flex-col items-center justify-center h-full text-center p-6">
        <div className="animate-spin rounded-full h-10 w-10 border-b-2 border-ios-blue dark:border-blue-400 mb-3"></div>
        <p className="font-medium">{message}</p>
    </div>
);

// โ๏ธ ุฏฺฉูู ุฏุงุฑฺฉ ููุฏ
const DarkModeToggle = ({ enabled, onToggle }) => (
    <div
        onClick={onToggle}
        className={`w-14 h-7 flex items-center rounded-full p-1 cursor-pointer transition-colors ${enabled ? "bg-ios-blue" : "bg-gray-300"}`}
    >
        <div
            className={`bg-white w-5 h-5 rounded-full shadow-md transform duration-300 ease-in-out ${enabled ? "translate-x-7" : ""}`}
        ></div>
    </div>
);

// โ ุฏฺฉูู ุณูุฏ
const PlusButton = ({ onClick }) => (
    <button
        onClick={onClick}
        className={`bg-ios-blue w-14 h-14 rounded-full -mt-6 shadow-xl flex items-center justify-center text-3xl text-white transition-transform transform hover:scale-105 active:scale-95 z-20 border-4 border-white dark:border-[#1C1C1E]`}
    >
        โ
    </button>
);

// ๐ฒ ููุชู PWA
const PWAInstallPrompt = ({ isVisible, onInstall, onDismiss }) => {
    if (!isVisible) return null;
    return (
        <div className="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border border-gray-300 dark:border-gray-700 flex items-center space-x-4 space-x-reverse z-50">
            <span className="text-2xl">๐งณ</span>
            <div className="flex-1 text-sm font-medium">
                ูุตุจ ุจุฑูุงูู ุฏุณุชุงุฑ ูุงู ุณูุฑ
            </div>
            <button 
                className="bg-ios-blue text-white px-3 py-1 rounded-md"
                onClick={onInstall}
            >
                ูุตุจ
            </button>
            <button 
                className="text-gray-500 dark:text-gray-300 px-2"
                onClick={onDismiss}
            >
                โ
            </button>
        </div>
    );
};

// ๐ ุฏุฑุจุงุฑู ูุง
const AboutScreen = () => (
    <div className="p-4 pb-20 space-y-6">
        <h1 className="text-3xl font-bold pt-4 pb-2">ุฏุฑุจุงุฑู ูุง</h1>
        <div className={`${COLORS.secondaryBg} p-6 rounded-xl shadow-md border ${COLORS.separator} text-center`}>
            <p className="text-lg font-bold mb-4 text-ios-blue dark:text-blue-400">
                ุจุฑูุงูู ุฏุณุชุงุฑ ูุงู ุณูุฑูุง ุฎุงุฑุฌ
            </p>
            <p className={COLORS.mutedText}>
                ุงู ุจุฑูุงูู ุจุง ูุฏู ูุฏุฑุช ู ูพฺฏุฑ ูุฒููโูุง ุงุฑุฒ ุณูุฑุ ุจูโุตูุฑุช ฺฉ ูุจโุงูพูฺฉุดู ูุณุชูู (PWA) ุทุฑุงุญ ุดุฏู ุงุณุช.
            </p>
            <p className="mt-6 text-sm font-medium">
                ููุดุชู ุดุฏู ุจุง โค๏ธ ุชูุณุท ูุญูุฏ ุตุงุฏู ฺฉุงุฌ
            </p>
        </div>
    </div>
);

// ๐ App
const App = () => {
    const [isSplashVisible, setIsSplashVisible] = React.useState(true);
    const [theme, setTheme] = React.useState("light");
    const [showInstallPrompt, setShowInstallPrompt] = React.useState(false);
    const [deferredPrompt, setDeferredPrompt] = React.useState(null);

    React.useEffect(() => {
        setTimeout(() => setIsSplashVisible(false), 1500);

        // PWA
        const handleBeforeInstallPrompt = (e) => {
            e.preventDefault();
            setDeferredPrompt(e);
            setShowInstallPrompt(true);
        };
        window.addEventListener("beforeinstallprompt", handleBeforeInstallPrompt);
        return () => window.removeEventListener("beforeinstallprompt", handleBeforeInstallPrompt);
    }, []);

    React.useEffect(() => {
        document.documentElement.classList.toggle("dark", theme === "dark");
    }, [theme]);

    const handleInstallClick = async () => {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            await deferredPrompt.userChoice;
            setDeferredPrompt(null);
            setShowInstallPrompt(false);
        }
    };

    return (
        <div className={`min-h-screen ${COLORS.tertiaryBg} ${COLORS.lightText} flex flex-col`} style={{ direction: 'rtl' }}>
            <SplashScreen isVisible={isSplashVisible} />

            <header className={`${COLORS.secondaryBg} shadow-sm p-4 fixed top-0 left-0 right-0 z-30 border-b ${COLORS.separator}`}>
                <div className="flex justify-between items-center h-10">
                    <h1 className="text-xl font-bold">๐งณ ุฏุณุชุงุฑ ุณูุฑ</h1>
                    <DarkModeToggle enabled={theme === "dark"} onToggle={() => setTheme(theme === "dark" ? "light" : "dark")} />
                </div>
            </header>

            <main className="pt-20 pb-16 flex-grow overflow-y-auto">
                <AboutScreen />
            </main>

            <div className="fixed bottom-6 right-6">
                <PlusButton onClick={() => alert("โ ฺฉูฺฉ ุดุฏ")} />
            </div>

            <PWAInstallPrompt 
                isVisible={showInstallPrompt} 
                onInstall={handleInstallClick} 
                onDismiss={() => setShowInstallPrompt(false)} 
            />
        </div>
    );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);

</script>
</body>
</html>
